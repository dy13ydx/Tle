#!/usr/bin/env bash

# 1. Set MATE window-switch shortcut
gsettings set org.mate.Marco.global-keybindings switch-windows '<Alt>grave'
gsettings set org.mate.Marco.global-keybindings switch-group 'disabled'

# 2. Download dotfiles
curl -fsSL https://raw.githubusercontent.com/dy13ydx/Tle/refs/heads/master/.tmux.conf -o ~/.tmux.conf 
curl -fsSL https://raw.githubusercontent.com/dy13ydx/Tle/refs/heads/master/.inputrc -o ~/.inputrc
curl -fsSL https://raw.githubusercontent.com/dy13ydx/Tle/refs/heads/master/.vimrc -o ~/.vimrc

# 3. Prepare directories
mkdir -p ~/.config/bin
mkdir -p ~/.local/bin
mkdir -p ~/dy13ydx

# 4. Download helper scripts
curl -fsSL https://raw.githubusercontent.com/dy13ydx/Tle/refs/heads/master/target -o ~/.local/bin/target
curl -fsSL https://raw.githubusercontent.com/dy13ydx/Tle/refs/heads/master/yxp -o ~/.local/bin/yxp
chmod +x ~/.local/bin/target ~/.local/bin/yxp

# 5. Install clipboard tools
sudo apt install -y xclip xsel

# 6. Grab nc.exe and Vimium config
curl -fsSL https://raw.githubusercontent.com/int0x33/nc.exe/master/nc64.exe -o ~/dy13ydx/nc64.exe
curl -fsSL https://raw.githubusercontent.com/dy13ydx/Tle/refs/heads/master/vimium.json -o ~/dy13ydx/vimium.json

# 7. Open Vimium extension page in Firefox
firefox https://addons.mozilla.org/en-GB/firefox/addon/vimium-ff/

echo "[✓] Bootstrap finished — dropping into interactive Bash and starting tmux…"

# 8. Switch to a fresh interactive Bash so .inputrc loads, then auto-start tmux
exec bash --login -i -c tmux
