#!/bin/bash
LHOST=$(ip -4 addr show dev tun0 | grep -oP 'inet \K[\d.]+')
RHOST=$(cat ~/.config/bin/target)
OUTPUT="RHOST=$RHOST LHOST=$LHOST"

# Prefer xsel, fall back to xclip; fail if none installed
if command -v xsel >/dev/null 2>&1; then
  CLIP_CMD="xsel -b"
elif command -v xclip >/dev/null 2>&1; then
  CLIP_CMD="xclip -selection clipboard"
else
  echo "No clipboard utility found (xsel/xclip)."
  exit 1
fi

# Use pipefail so any failure in the pipeline stops the success message
(set -o pipefail; printf '%s' "$OUTPUT" | $CLIP_CMD) && echo "Copied to clipboard: $OUTPUT"
